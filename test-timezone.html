<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>时区测试</title>
</head>
<body>
    <h1>浏览器时区测试</h1>
    <div id="output"></div>
    <script>
        const output = document.getElementById('output');
        const log = (msg) => {
            const p = document.createElement('p');
            p.textContent = msg;
            output.appendChild(p);
        };

        // 测试数据：数据库返回的 UTC 时间
        const testTimes = [
            '2026-02-26T01:30:00+00:00',  // 应该对应北京时间 09:30
            '2026-02-26T03:30:00+00:00',  // 应该对应北京时间 11:30
            '2026-02-26T05:00:00+00:00',  // 应该对应北京时间 13:00
            '2026-02-26T07:00:00+00:00',  // 应该对应北京时间 15:00
        ];

        log('浏览器时区: ' + Intl.DateTimeFormat().resolvedOptions().timeZone);
        log('');

        testTimes.forEach(iso => {
            const d = new Date(iso);
            const h = d.getHours();
            const m = d.getMinutes();
            const min = h * 60 + m;
            
            log(`ISO: ${iso}`);
            log(`  getHours(): ${h}, getMinutes(): ${m}`);
            log(`  minutesOfDay: ${min}`);
            log(`  在交易时间内: ${(min >= 9 * 60 + 30 && min <= 11 * 60 + 30) || (min >= 13 * 60 && min <= 15 * 60)}`);
            log('');
        });

        // 测试一个超出范围的时间
        const outOfRange = '2026-02-26T07:25:00+00:00';  // 北京时间 15:25
        const d2 = new Date(outOfRange);
        const h2 = d2.getHours();
        const m2 = d2.getMinutes();
        const min2 = h2 * 60 + m2;
        log(`超出范围测试: ${outOfRange}`);
        log(`  getHours(): ${h2}, getMinutes(): ${m2}`);
        log(`  minutesOfDay: ${min2}`);
        log(`  在交易时间内: ${(min2 >= 9 * 60 + 30 && min2 <= 11 * 60 + 30) || (min2 >= 13 * 60 && min2 <= 15 * 60)}`);
    </script>
</body>
</html>
